namespace: argo-workflows # cluster namespace to run on

# To enable running on the cluster, Argo requires the plugin to be packaged
# as a Docker image. This section defines the image to use.
deployment:
  image: your-registry/your-image  # Docker image to use for workflow execution
  tag: latest  # Image tag
  target_platform: linux/amd64  # Target platform for the image
  context: ./  # Docker build context directory (optional)

# Configuration passed to the runner
runner:
  # Flag to indicate that memory datasets should be
  # used within the fused pipeline boundary, essentially
  # indicating that catalog entries are removed, and datasets
  # are passed in-memory as a result.
  use_memory_datasets: true

# Machine types available for use, the name of the `machine_type`
# is used to assign resources to a Kedro node.
machine_types:
  default:
    mem: 16
    cpu: 4
    num_gpu: 0
  g2-standard-4:
    mem: 16
    cpu: 4
    num_gpu: 1
  g2-standard-8:
    mem: 32
    cpu: 8
    num_gpu: 1
  g2-standard-12:
    mem: 48
    cpu: 12
    num_gpu: 1
  g2-standard-16:
    mem: 64
    cpu: 16
    num_gpu: 1
  g2-standard-24:
    mem: 96
    cpu: 24
    num_gpu: 2
  g2-standard-32:
    mem: 128
    cpu: 32
    num_gpu: 1
  g2-standard-48:
    mem: 192
    cpu: 48
    num_gpu: 4
  g2-standard-96:
    mem: 384
    cpu: 96
    num_gpu: 8

# Default machine type to use when none specified
default_machine_type: default

# Section allows for customizing the Workflow
# template sent to Argo
template:

  # Section allows for including environment variables in the
  # node for execution, currently limited to secret references.
  environment:
    - name: OPENAI_API_TOKEN
      secret_ref:
        name: matrix_secrets
        key: OPENAI_API_KEY

